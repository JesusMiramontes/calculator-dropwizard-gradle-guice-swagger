version: "3"
services:
  calculator-api-redis:
    image: "redis:latest"
    container_name: "calculator-api-redis"
    ports:
      - 6379:6379
    hostname: calculator-api-redis
  calculator-api-app:
    build:
      context: .
    ports:
      - 8080:8080
      - 8081:8081
    container_name: calculator-api-app
    depends_on:
      - calculator-api-redis
  calculator-api-gateway:
    image: calculator-gateway.jar:latest
    build:
      context: .
    ports:
      - 9000:9000
    expose:
      - 9000
    container_name: calculator-api-gateway
    depends_on:
      - calculator-api-redis